@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 214, 219, 220;
  --background-end-rgb: 255, 255, 255;
}

@media (prefers-color-scheme: dark) {
  :root {
    --foreground-rgb: 255, 255, 255;
    --background-start-rgb: 0, 0, 0;
    --background-end-rgb: 0, 0, 0;
  }
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
      to bottom,
      transparent,
      rgb(var(--background-end-rgb))
    )
    rgb(var(--background-start-rgb));
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* Graph Card Styles */
.graph-card {
  @apply bg-white rounded-2xl p-6 border-2 border-gray-200 shadow-lg;
}

.graph-card.green {
  @apply border-green-500;
}

.graph-card.yellow {
  @apply border-yellow-500;
}

.graph-card.red {
  @apply border-red-500;
}

.graph-card .card-header h3 {
  @apply font-semibold text-lg text-gray-800 mb-2 m-0;
}

.graph-card .sensor-value {
  @apply font-bold text-2xl text-gray-800 mb-2;
}

.graph-card .sensor-info {
  @apply flex justify-between items-center text-sm text-gray-500;
}

.graph-card .change.positive {
  @apply text-green-500 font-medium;
}

.graph-card .change.negative {
  @apply text-red-500 font-medium;
}

.graph-card .chart-container {
  @apply relative;
}

.graph-card .chart {
  @apply w-full h-auto max-w-[306px] mx-auto block;
}

.graph-card .time-labels {
  @apply flex justify-between mt-3 text-xs text-gray-500;
}

/* PWA Standalone Mode Styles - Native App Experience */
@media (display-mode: standalone) {
  html, body {
    background: #fcfaf7;
    color: #171412;
    /* Ensure full screen appearance without breaking scroll */
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100vh; /* Use min-height for scrollability */
    
    /* Prevent any browser UI from showing */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: none;
  }

  /* Hide all browser UI elements in standalone mode */
  .standalone-only {
    display: block;
  }

  /* Ensure proper safe area handling for notches */
  @supports (padding: max(0px)) {
    body {
      padding-left: max(0px, env(safe-area-inset-left));
      padding-right: max(0px, env(safe-area-inset-right));
      padding-top: max(0px, env(safe-area-inset-top));
      padding-bottom: max(0px, env(safe-area-inset-bottom));
    }
  }

  /* Prevent pull-to-refresh and bounce effects */
  body {
    overscroll-behavior-y: none;
    -webkit-overflow-scrolling: touch;
  }
}

/* PWA Minimal-UI Mode Styles - Fallback for browsers that don't support standalone */
@media (display-mode: minimal-ui) {
  html, body {
    background: #fcfaf7;
    color: #171412;
    /* Ensure full screen appearance without breaking scroll */
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100vh; /* Use min-height for scrollability */
    
    /* Prevent any browser UI from showing */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: none;
  }
}



/* Hide elements when not in standalone mode */
@media (display-mode: browser) {
  .standalone-only {
    display: none;
  }
}

/* iOS Safari specific styles for standalone mode */
@supports (-webkit-touch-callout: none) {
  body {
    /* Prevent bounce scrolling on iOS */
    -webkit-overflow-scrolling: touch;
    overflow-scrolling: touch;
  }
}



/* Ensure the main content area is scrollable */
/* This assumes your main content is within a div that takes up the remaining height */
/* You might need to adjust this based on your actual layout structure */
body > div { /* Target the direct child of body, which is likely your main app container */
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

/* Example for a scrollable content area within the main app container */
.scrollable-content {
  flex-grow: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Hide Tanstack Query DevTools to prevent extra scroll */
.tsqd-parent-container {
  display: none !important;
}

/* Prevent body scroll overflow */
body {
  overflow-x: hidden;
  max-width: 100vw;
}
